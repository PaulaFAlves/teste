(()=>{const t="http://localhost:3000/tasks",e=$("#select-list");function n(){return $.ajax({url:t,method:"GET",dataType:"json"})}function s(e){const n=$("#taskList");n.empty(),e.forEach((e=>{const s=$("<li>",{class:"list-group-item d-flex justify-content-between align-items-center",text:e.title}),a=$("<div>",{class:"d-flex align-items-center gap-2"}).appendTo(s),l=$("<button>",{class:"btn btn-danger btn-sm ml-2",text:"Excluir"}).appendTo(a);l.on("click",(()=>{(function(e){const n=`${t}/${e}`;return $.ajax({url:n,method:"DELETE"})})(e.id).then((()=>{s.remove()}))}));const o=$("<button>",{class:"btn btn-success btn-sm ml-2 markCompletedBtn",text:"ConcluÃ­da"}).appendTo(a);e.completed&&(s.addClass("list-group-item-success"),o.remove(),l.remove()),o.on("click",(()=>{(function(e){const n=`${t}/${e}`;return $.ajax({url:n,method:"PATCH",contentType:"application/json",data:JSON.stringify({completed:!0}),dataType:"json"})})(e.id).then((()=>{s.addClass("list-group-item-success"),o.remove(),l.remove()}))})),n.append(s)}))}function a(){const a=$("#taskInput"),l=a.val().trim(),o=parseInt($("#select-list").val(),10);e.find(":selected").text(),""===l||isNaN(o)||function(e,n){return $.ajax({url:t,method:"POST",contentType:"application/json",data:JSON.stringify({title:e,listId:n,completed:!1}),dataType:"json"})}(l,o).then((()=>{a.val(""),n().then((t=>{s(t.filter((t=>t.listId===o)))}))}))}!function(){let t;const l=$("#taskInput"),o=$("#addButton");l.on("input",(()=>{taskName=l.val().trim(),""===taskName?o.prop("disabled",!0):o.prop("disabled",!1)})),$.ajax({url:"http://localhost:3000/lists",method:"GET",dataType:"json"}).then((a=>{!function(t){t.forEach((t=>{const n=$("<option>",{value:t.id,text:t.title});e.append(n)})),e.on("change",(()=>{const t=parseInt($("#select-list").val(),10);e.find(":selected").text(),n().then((e=>{s(e.filter((e=>e.listId===t)))}))}))}(a);const l=parseInt($("#select-list").val(),10),o=a.find((t=>t.id===l));o&&(t=o.title)})).then(n).then((t=>{const e=parseInt($("#select-list").val(),10);s(t.filter((t=>t.listId===e)))})),$("#addButton").on("click",a)}()})();